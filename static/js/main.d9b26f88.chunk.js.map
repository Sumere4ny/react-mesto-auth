{"version":3,"sources":["components/ProtectedRoute.js","images/logo.svg","components/Header.js","components/Login.js","components/Register.js","images/icon-ok.svg","images/icon-cross.svg","contexts/infoTooltipContext.js","components/InfoTooltip.js","images/like-button.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/constants.js","utils/api.js","utils/auth.js","images/avatar.jpg","components/App.js","index.js"],"names":["ProtectedRoute","Component","component","props","loggedIn","to","Header","className","src","logo","alt","path","isLoggedIn","email","onClick","onLogout","Login","React","useState","setEmail","password","setPassword","onSubmit","evt","preventDefault","type","placeholder","value","onChange","target","required","Register","InfoTooltipContext","createContext","infoTooltipCaptions","success","text","imgPath","iconOk","fail","iconFail","InfoTooltip","infoTooltipContext","useContext","isOpen","id","onClose","CurrentUserContext","Card","currentUser","isOwn","card","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","cardDeleteButtonClassName","link","name","onCardDelete","likeButton","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","item","onCardClick","Footer","PopupWithForm","aria-label","title","noValidate","children","EditProfilePopup","setName","description","setDescription","useEffect","e","onUpdateUser","minLength","maxLength","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","reset","ref","AddPlacePopup","inputName","inputLink","ImagePopup","requestParams","baseUrl","headers","authorization","api","this","_baseUrl","_headers","res","ok","json","Promise","reject","Error","status","fetch","method","then","_getResponseData","body","JSON","stringify","avatarUrl","auth","options","token","Authorization","_handleResponse","App","history","useHistory","setLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setInfoTooltipContext","selectedCard","setSelectedCard","setCurrentUser","setCards","handleLogin","handleInfoTooltipOpen","closeAllPopups","jwt","localStorage","getItem","getUserLoginInfo","data","push","catch","err","console","log","tokenCheck","all","getProfileData","getInitialCards","user","initialCards","Provider","removeItem","exact","deleteCard","newCards","filter","c","deleteLike","putLike","newCard","signIn","setItem","signUp","finally","setProfileData","newData","editAvatar","createCard","ReactDOM","render","StrictMode","basename","process","document","getElementById"],"mappings":"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","file":"static/js/main.d9b26f88.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n  )}\r\n\r\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\n\r\nimport { NavLink, Route } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} className=\"header__logo\" alt=\"Место\" />\r\n      <nav className=\"header__nav\">\r\n        <Route path=\"/sign-up\">\r\n          <NavLink to='/sign-in' className=\"link header__nav-link\">Войти</NavLink>\r\n        </Route>\r\n        <Route path=\"/sign-in\">\r\n          <NavLink to='/sign-up' className=\"link header__nav-link\">Зарегистрироваться</NavLink>\r\n        </Route>\r\n        {props.isLoggedIn && (<Route path=\"/\">\r\n          <p className=\"header__user-info\">{props.email}</p>\r\n          <button onClick={props.onLogout} className=\"link header__nav-link\">Выйти</button>\r\n        </Route>)}\r\n      </nav>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleEmailChange(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    if (!password || !email) {\r\n      return;\r\n    }\r\n    props.onSubmit(password, email);\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"auth\">\r\n        <h2 className=\"auth-form__title\">Вход</h2>\r\n        <form className=\"auth-form\"\r\n              onSubmit={handleSubmit}\r\n        >\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            className=\"auth-form__input\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className=\"auth-form__input\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            required\r\n          />\r\n          <button type=\"submit\"\r\n                  className=\"auth-form__submit\"\r\n                  value=\"loggedIn\"          >\r\n            Войти\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"auth__redirect\">\r\n          Ещё не зарегистрированы? {<Link to=\"/sign-up\"\r\n            className=\"link\">\r\n            Регистриация\r\n          </Link>}\r\n        </p>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Register(props) {\r\n  const [password, setPassword] = React.useState('');\r\n  const [email, setEmail] = React.useState('');\r\n\r\n  function handleEmailChange(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    props.onSubmit(password, email);\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"auth\">\r\n      <h2 className=\"auth-form__title\">Регистрация</h2>\r\n        <form className=\"auth-form\"\r\n              onSubmit={handleSubmit}\r\n        >\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            className=\"auth-form__input\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className=\"auth-form__input\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            required\r\n          />\r\n          <button type=\"submit\"\r\n            className=\"auth-form__submit\"\r\n          >\r\n            Зарегистрироваться\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"auth__redirect\">\r\n          Уже зарегистрированы? {<Link to=\"/sign-in\"\r\n            className=\"link\">\r\n            Войти\r\n          </Link>}\r\n        </p>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Register\r\n","export default __webpack_public_path__ + \"static/media/icon-ok.e004e6e7.svg\";","export default __webpack_public_path__ + \"static/media/icon-cross.471086c8.svg\";","import React from \"react\";\r\nimport iconOk from '../images/icon-ok.svg';\r\nimport iconFail from '../images/icon-cross.svg';\r\n\r\nexport const InfoTooltipContext = React.createContext();\r\n\r\nexport const infoTooltipCaptions = {\r\n  success: {\r\n    text: 'Вы успешно зарегистрировались!',\r\n    imgPath: iconOk\r\n  },\r\n  fail: {\r\n    text: 'Что-то пошло не так!\\n' +\r\n      'Попробуйте ещё раз.',\r\n    imgPath: iconFail\r\n  }\r\n}\r\n","import React from \"react\";\nimport { InfoTooltipContext } from \"../contexts/infoTooltipContext\";\n\nexport default function InfoTooltip(props) {\n  const infoTooltipContext = React.useContext(InfoTooltipContext);\n\n  return (\n    <section className={`popup ${props.isOpen && 'popup_opened'}`}\n      id=\"popup__infoTooltip\"\n    >\n      <div className=\"infoTooltip popup__container\">\n        <img className=\"infoTooltip__icon\"\n          src={infoTooltipContext.imgPath}\n          alt=\"Результат регистрации\"\n        />\n        <p className=\"infoTooltip__caption\">\n          {infoTooltipContext.text}\n        </p>\n        <button onClick={props.onClose}\n          type=\"button\"\n          className=\"popup__close-button\"        >\n        </button>\n      </div>\n    </section>\n  )\n}\n","export default __webpack_public_path__ + \"static/media/like-button.df0c9655.svg\";","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport likeButton from '../images/like-button.svg';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n  const cardLikeButtonClassName = `cards__like-button ${isLiked ? 'cards__like-button_active' : ''}`;\n\n  const cardDeleteButtonClassName = `cards__remove-button ${isOwn ? '' : 'cards__remove-button_hidden'}`;\n\n\n  function handleCardClick() {\n    props.onClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card)\n  }\n\n  function handleCardDelete() {\n    props.onCardDelete(props.card)\n  }\n\n  return (\n    <div className=\"cards__item\">\n      <img className=\"cards__image\" src={props.card.link} alt={props.card.name} onClick={handleCardClick} />\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleCardDelete} />\n      <div className=\"cards__description\">\n        <h2 className=\"cards__title\">{props.card.name}</h2>\n        <div className=\"cards__like-container\">\n          <img src={likeButton} className={cardLikeButtonClassName} alt=\"Лайк\" onClick={handleLikeClick} />\n          <span className=\"cards__like-number\">{props.card.likes.length}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар профиля\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__title\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"profile__edit-button\" onClick={props.onEditProfile} type=\"button\" />\r\n          </div>\r\n          <p className=\"profile__profession\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__add-button\" onClick={props.onAddPlace} type=\"button\" />\r\n      </section>\r\n\r\n      <section className=\"cards\">\r\n        {props.cards.map(item =>\r\n          (<Card key={item._id} card={item}\r\n            onClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />)\r\n          )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer\n","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <section className={`popup ${props.isOpen && 'popup_opened'} popup_type_${props.name}`}>\r\n      <div className=\"popup__container\">\r\n        <button type=\"button\" onClick={props.onClose} className=\"popup__close-button\" \r\n          aria-label=\"Закрыть\" />\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form className=\"popup__form\" name={props.name} noValidate onSubmit={props.onSubmit} >\r\n          {props.children}\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm\r\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction EditProfilePopup(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleNameChange(e) {\n    setName(e.target.value)\n  }\n\n  function handleDescriptionChange(e) {\n    setDescription(e.target.value)\n  }\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return(\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      name=\"edit-profile\"\n      title=\"Редактировать профиль\">\n      <input type=\"text\" className=\"popup__input popup__input_name-field\" id=\"name\"\n        name=\"name\" minLength=\"2\" maxLength=\"40\" value={name}\n        onChange={handleNameChange} required />\n      <span id='name-error' className='popup__input-error'></span>\n      <input type=\"text\" className=\"popup__input popup__input_profession\" id=\"profession\"\n        name=\"about\" minLength=\"2\" maxLength=\"200\" value={description}\n        onChange={handleDescriptionChange} required />\n      <span id='profession-error' className='popup__input-error'></span>\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n    e.target.reset();\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-avatar\"\r\n      title=\"Обновить аватар\">\r\n      <input type=\"url\" className=\"popup__input popup__input_avatar-link\" id=\"avatar-link\"\r\n        name=\"link\" placeholder=\"Ссылка на аватар\" ref={avatarRef} required />\r\n      <span id='avatar-link-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup\r\n","import React from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup(props) {\n\n  const inputName = React.useRef();\n  const inputLink = React.useRef();\n\n  function handleSubmit(e){\n    e.preventDefault();\n    props.onAddPlace({\n      name: inputName.current.value,\n      link: inputLink.current.value\n    });\n  }\n\n  return(\n    <PopupWithForm\n      isOpen={props.isOpen}\n      onClose={props.onClose}\n      onSubmit={handleSubmit}\n      name=\"add-new-card\"\n      title=\"Новое место\">\n      <input type=\"text\" className=\"popup__input popup__input_place-name\" id=\"place-name\"\n        name=\"name\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\" ref={inputName} required />\n      <span id='place-name-error' className='popup__input-error'></span>\n      <input type=\"url\" className=\"popup__input popup__input_place-link\" id=\"place-link\"\n        name=\"link\" placeholder=\"Ссылка на картинку\" ref={inputLink} required />\n      <span id='place-link-error' className='popup__input-error'></span>\n      <button type=\"submit\" className=\"popup__submit\">Создать</button>\n    </PopupWithForm>\n  )\n}\n\nexport default AddPlacePopup\n","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n  return (\r\n    <div className={`popup ${props.isOpen && 'popup_opened'} popup_type_lightbox`}>\r\n      <div className=\"lightbox\">\r\n          <button\r\n            className=\"popup__close-button\"\r\n            type=\"button\"\r\n            onClick={props.onClose}\r\n            aria-label=\"Закрыть\"\r\n          />\r\n          <img className=\"lightbox__image\"\r\n            src={props.card.link} alt={props.card.name} />\r\n          <h2 className=\"lightbox__image-title\">{props.card.name}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup\r\n","\nconst requestParams = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19',\n  headers: {\n      authorization: 'd9b0d4bd-9467-4294-aae9-066f4b6515ac',\n      'Content-Type': 'application/json'\n  }\n};\n\nexport default requestParams\n","import requestParams from './constants.js';\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  // Общий обработчик запросов\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  // Получаем массив существующих карточек\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Получаем основные данные текущего профиля\r\n  getProfileData() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Отправляем обновленную информацию профиля\r\n  setProfileData({ name, about }) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'PATCH',\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about\r\n      })\r\n      })\r\n      .then(this._getResponseData)\r\n  }\r\n\r\n  // Создание и удаление карточки\r\n  createCard({ name, link }) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ name: name, link: link })\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Установка и снятие лайка для карточки\r\n  putLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Обновление аватара\r\n  editAvatar(avatarUrl) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(avatarUrl)\r\n    }).then(this._getResponseData)\r\n  }\r\n}\r\n\r\nexport const api = new Api(requestParams);","class Auth {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n  \r\n  _handleResponse(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(new Error(`Ошибка: ${res.status}`));        \r\n    } \r\n    return res.json();\r\n  }\r\n  \r\n  getUserLoginInfo(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n \r\n  signUp(email, password) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n  \r\n  signIn(email, password) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n}\r\n  \r\nexport const auth = new Auth({\r\n  baseUrl: \"https://auth.nomoreparties.co\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});","export default __webpack_public_path__ + \"static/media/avatar.74c3c0fb.jpg\";","import React from 'react';\nimport ProtectedRoute from './ProtectedRoute';\nimport Header from './Header';\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport { api } from '../utils/api';\nimport { auth } from '../utils/auth';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport { InfoTooltipContext, infoTooltipCaptions } from '../contexts/infoTooltipContext';\nimport avatar from '../images/avatar.jpg';\n\nfunction App() {\n  const history = useHistory();\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [infoTooltipContext, setInfoTooltipContext] = React.useState('fail');\n  const [email, setEmail] = React.useState('');\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({\n    name: '',\n    about: '',\n    avatar: avatar\n  });\n  const [cards, setCards] = React.useState([]);\n\n\n  React.useEffect(() => {\n    function tokenCheck() {\n      const jwt = localStorage.getItem('token');\n      if (jwt) {\n        auth.getUserLoginInfo(jwt)\n          .then(res => {\n            if (res) {\n              setEmail(res.data.email);\n              history.push('/');\n              handleLogin();\n            }\n          })\n          .catch(err => console.log(err))\n      }\n    }\n    tokenCheck();\n  }, [loggedIn, history]);\n\n  React.useEffect(() => {\n    Promise.all([api.getProfileData(), api.getInitialCards()])\n      .then(([user, initialCards]) => {\n          setCurrentUser(user);\n          setCards([...initialCards]);\n      })\n      .catch(err => console.log(err));\n  }, [])\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n    setIsImagePopupOpen(true);\n  };\n\n  function handleLogin() {\n    setLoggedIn(true);\n  }\n\n  function handleLogout() {\n    setLoggedIn(false);\n    localStorage.removeItem('token');\n    history.push('/sign-in');\n  }\n\n  function handleInfoTooltipOpen() {\n    setIsInfoTooltipOpen(true);\n  }\n\n  function handleLoginFormSubmit(email, password) {\n    auth.signIn(password, email)\n      .then(data => {\n        if (data.token) {\n          localStorage.setItem('token', data.token);\n          handleLogin();\n          history.push('/');\n        }\n      })\n      .catch(() => {\n        setInfoTooltipContext('fail');\n        handleInfoTooltipOpen();\n      })\n  }\n\n  function handleRegisterFormSubmit(email, password) {\n    auth.signUp(password, email)\n      .then(res => {\n        if (res) {\n          setInfoTooltipContext('success');\n          history.push('/sign-in');\n        } else {\n          setInfoTooltipContext('fail');\n        }\n      })\n      .catch(err => console.log(err))\n      .finally(() => {\n        handleInfoTooltipOpen();\n      })\n  }\n\n  function handleUpdateAvatar(data){\n    api.editAvatar(data)\n      .then((newData) => {\n        setCurrentUser(newData);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n\n  function handleUpdateUser(data) {\n    api.setProfileData(data)\n      .then((newData) => {\n        setCurrentUser(newData);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n\n  function handleUpdateCards(data) {\n    api.createCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err));\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    (!isLiked ? api.putLike(card._id) : api.deleteLike(card._id))\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch(err => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((c) => c._id !== card._id);\n        setCards(newCards);\n      })\n      .catch(err => console.log(err));\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n\n        <Header email={email} isLoggedIn={loggedIn} onLogout={handleLogout} />\n\n        <Switch>\n        <ProtectedRoute\n            exact path=\"/\"\n            component={Main}\n            loggedIn={loggedIn}\n            cards={cards}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardDelete={handleCardDelete}\n            onCardLike={handleCardLike} />\n\n          <Route path='/sign-in'>\n            <Login onSubmit={handleLoginFormSubmit} />\n          </Route>\n\n          <Route path='/sign-up'>\n            <Register onSubmit={handleRegisterFormSubmit} />\n          </Route>\n\n        </Switch>\n\n        {loggedIn && <Footer />}\n\n      </div>\n\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleUpdateCards}\n      />\n\n      <PopupWithForm\n        name=\"delete-card\"\n        title=\"Вы уверены\">\n        <button type=\"submit\" className=\"popup__submit popup__submit-confirm\">Да</button>\n      </PopupWithForm>\n\n      <InfoTooltipContext.Provider value={infoTooltipCaptions[infoTooltipContext]}>\n        <InfoTooltip\n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n          loggedIn={loggedIn}\n        />\n      </InfoTooltipContext.Provider>\n\n      <ImagePopup\n        isOpen={isImagePopupOpen}\n        onClose={closeAllPopups}\n        card={selectedCard}\n      />\n\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}