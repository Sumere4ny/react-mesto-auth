{"version":3,"sources":["components/ProtectedRoute.js","images/logo.svg","components/Header.js","components/Login.js","components/Register.js","images/icon-ok.svg","images/icon-cross.svg","contexts/infoTooltipContext.js","components/InfoTooltip.js","images/like-button.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/constants.js","utils/api.js","utils/auth.js","images/avatar.jpg","components/App.js","index.js"],"names":["ProtectedRoute","Component","component","props","loggedIn","to","Header","className","src","logo","alt","path","isLoggedIn","user","onClick","onLogout","Login","React","useState","email","setEmail","password","setPassword","onSubmit","evt","preventDefault","type","placeholder","value","onChange","target","required","Register","InfoTooltipContext","createContext","infoTooltipCaptions","success","text","imgPath","iconOk","fail","iconFail","InfoTooltip","infoTooltipContext","useContext","isOpen","id","onClose","CurrentUserContext","Card","currentUser","isOwn","card","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","cardDeleteButtonClassName","link","name","onCardDelete","likeButton","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","item","onCardClick","Footer","PopupWithForm","aria-label","title","noValidate","children","EditProfilePopup","setName","description","setDescription","useEffect","e","onUpdateUser","minLength","maxLength","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","reset","ref","AddPlacePopup","inputName","inputLink","ImagePopup","requestParams","baseUrl","headers","authorization","api","this","_baseUrl","_headers","res","ok","json","Promise","reject","Error","status","fetch","method","then","_getResponseData","body","JSON","stringify","avatarUrl","auth","options","token","Authorization","_handleResponse","App","history","useHistory","setLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setInfoTooltipContext","selectedCard","setSelectedCard","setCurrentUser","setCards","handleLogin","handleInfoTooltipOpen","closeAllPopups","jwt","localStorage","getItem","UserLoginInfo","push","catch","err","console","log","tokenCheck","all","getProfileData","getInitialCards","initialCards","Provider","removeItem","deleteCard","newCards","filter","c","deleteLike","putLike","newCard","singIn","data","setItem","singUp","finally","setProfileData","newData","editAvatar","createCard","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"uOAYeA,EATQ,SAAC,GAAyC,IAA5BC,EAA2B,EAAtCC,UAAyBC,EAAa,6BAC9D,OACE,cAAC,IAAD,UAEI,kBAAMA,EAAMC,SAAW,cAACH,EAAD,eAAeE,IAAY,cAAC,IAAD,CAAUE,GAAG,kBCPxD,MAA0B,iC,OCwB1BC,MApBf,SAAgBH,GACd,OACE,yBAAQI,UAAU,SAAlB,UACE,qBAAKC,IAAKC,EAAMF,UAAU,eAAeG,IAAI,mCAC7C,sBAAKH,UAAU,cAAf,UACE,cAAC,IAAD,CAAOI,KAAK,WAAZ,SACE,cAAC,IAAD,CAASN,GAAG,WAAWE,UAAU,wBAAjC,8CAEF,cAAC,IAAD,CAAOI,KAAK,WAAZ,SACE,cAAC,IAAD,CAASN,GAAG,WAAWE,UAAU,wBAAjC,4HAEDJ,EAAMS,YAAe,eAAC,IAAD,CAAOD,KAAK,IAAZ,UACpB,mBAAGJ,UAAU,oBAAb,SAAkCJ,EAAMU,OACxC,wBAAQC,QAASX,EAAMY,SAAUR,UAAU,wBAA3C,sDCdK,SAASS,EAAMb,GAAQ,IAAD,EACTc,IAAMC,SAAS,IADN,mBAC5BC,EAD4B,KACrBC,EADqB,OAEHH,IAAMC,SAAS,IAFZ,mBAE5BG,EAF4B,KAElBC,EAFkB,KAsBnC,OACE,sBAAMf,UAAU,UAAhB,SACE,0BAASA,UAAU,OAAnB,UACE,uBAAMA,UAAU,YACVgB,SAdZ,SAAsBC,GACpBA,EAAIC,iBACCJ,GAAaF,IAGlBhB,EAAMoB,SAASF,EAAUF,GACzBC,EAAS,IACTE,EAAY,MAMR,UAGE,oBAAIf,UAAU,mBAAd,sCACA,uBACEmB,KAAK,QACLC,YAAY,QACZpB,UAAU,mBACVqB,MAAOT,EACPU,SA9BV,SAA2BL,GACzBJ,EAASI,EAAIM,OAAOF,QA8BZG,UAAQ,IAEV,uBACEL,KAAK,WACLC,YAAY,uCACZpB,UAAU,mBACVqB,MAAOP,EACPQ,SAlCV,SAA8BL,GAC5BF,EAAYE,EAAIM,OAAOF,QAkCfG,UAAQ,IAEV,wBAAQL,KAAK,SACLnB,UAAU,oBACVqB,MAAM,WAFd,+CAOF,oBAAGrB,UAAU,iBAAb,8IAEG,cAAC,IAAD,CAAMF,GAAG,UAAUE,UAAU,OAA7B,8FCtDI,SAASyB,EAAS7B,GAAQ,IAAD,EACNc,IAAMC,SAAS,IADT,mBAC/BG,EAD+B,KACrBC,EADqB,OAEZL,IAAMC,SAAS,IAFH,mBAE/BC,EAF+B,KAExBC,EAFwB,KAkBtC,OACE,+BACE,0BAASb,UAAU,OAAnB,UACE,uBAAMA,UAAU,YACVgB,SAVS,SAACC,GACpBA,EAAIC,iBACJtB,EAAMoB,SAASF,EAAUF,GACzBG,EAAY,KAMR,UAGE,oBAAIf,UAAU,mBAAd,gFACA,uBACEmB,KAAK,QACLC,YAAY,QACZpB,UAAU,mBACVqB,MAAOT,EACPU,SA1BV,SAA2BL,GACzBJ,EAASI,EAAIM,OAAOF,QA0BZG,UAAQ,IAEV,uBACEL,KAAK,WACLC,YAAY,uCACZpB,UAAU,mBACVqB,MAAOP,EACPQ,SA9BV,SAA8BL,GAC5BF,EAAYE,EAAIM,OAAOF,QA8BfG,UAAQ,IAEV,wBAAQL,KAAK,SACXnB,UAAU,oBADZ,6HAOF,oBAAGA,UAAU,iBAAb,iIAEG,cAAC,IAAD,CAAMF,GAAG,WAAWE,UAAU,OAA9B,oDCrDI,UAA0B,oCCA1B,MAA0B,uCCI5B0B,EAAqBhB,IAAMiB,gBAE3BC,EAAsB,CACjCC,QAAS,CACPC,KAAM,wKACNC,QAASC,GAEXC,KAAM,CACJH,KAAM,uMAENC,QAASG,ICXE,SAASC,EAAYvC,GAClC,IAAMwC,EAAqB1B,IAAM2B,WAAWX,GAE5C,OACE,yBAAS1B,UAAS,gBAAWJ,EAAM0C,QAAU,gBACpCC,GAAG,qBADZ,SAGE,sBAAKvC,UAAU,cAAf,UACE,qBAAKA,UAAU,oBACVC,IAAKmC,EAAmBL,QACxB5B,IAAI,8HAET,mBAAGH,UAAU,uBAAb,SACGoC,EAAmBN,OAEtB,wBAAQvB,QAASX,EAAM4C,QACfrB,KAAK,SACLnB,UAAU,6BCpBX,UAA0B,wCCE5ByC,EAAqB/B,IAAMiB,gBC0CzBe,MAxCf,SAAc9C,GAEZ,IAAM+C,EAAcjC,IAAM2B,WAAWI,GAE/BG,EAAQhD,EAAMiD,KAAKC,MAAMC,MAAQJ,EAAYI,IAE7CC,EAAUpD,EAAMiD,KAAKI,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAE3DK,EAAuB,6BAAyBJ,EAAU,4BAA8B,IAExFK,EAAyB,+BAA2BT,EAAQ,GAAK,+BAevE,OACE,sBAAK5C,UAAU,cAAf,UACE,qBAAKA,UAAU,eAAeC,IAAKL,EAAMiD,KAAKS,KAAMnD,IAAKP,EAAMiD,KAAKU,KAAMhD,QAd9E,WACEX,EAAMW,QAAQX,EAAMiD,SAclB,wBAAQ7C,UAAWqD,EAA2BlC,KAAK,SAASZ,QAPhE,WACEX,EAAM4D,aAAa5D,EAAMiD,SAOvB,sBAAK7C,UAAU,qBAAf,UACE,oBAAIA,UAAU,eAAd,SAA8BJ,EAAMiD,KAAKU,OACzC,sBAAKvD,UAAU,wBAAf,UACE,qBAAKC,IAAKwD,EAAYzD,UAAWoD,EAAyBjD,IAAI,2BAAOI,QAf7E,WACEX,EAAM8D,WAAW9D,EAAMiD,SAejB,sBAAM7C,UAAU,qBAAhB,SAAsCJ,EAAMiD,KAAKI,MAAMU,mBCAlDC,MAjCf,SAAchE,GAEZ,IAAM+C,EAAcjC,IAAM2B,WAAWI,GAErC,OACE,uBAAMzC,UAAU,UAAhB,UACE,0BAASA,UAAU,UAAnB,UACE,qBAAKA,UAAU,4BAA4BO,QAASX,EAAMiE,aAA1D,SACE,qBAAK7D,UAAU,kBAAkBC,IAAK0C,EAAYmB,OAAQ3D,IAAI,sFAEhE,sBAAKH,UAAU,gBAAf,UACE,sBAAKA,UAAU,iBAAf,UACE,oBAAIA,UAAU,gBAAd,SAA+B2C,EAAYY,OAC3C,wBAAQvD,UAAU,uBAAuBO,QAASX,EAAMmE,cAAe5C,KAAK,cAE9E,mBAAGnB,UAAU,sBAAb,SAAoC2C,EAAYqB,WAElD,wBAAQhE,UAAU,sBAAsBO,QAASX,EAAMqE,WAAY9C,KAAK,cAG1E,yBAASnB,UAAU,QAAnB,SACGJ,EAAMsE,MAAMC,KAAI,SAAAC,GAAI,OAClB,cAAC,EAAD,CAAqBvB,KAAMuB,EAC1B7D,QAASX,EAAMyE,YACfX,WAAY9D,EAAM8D,WAClBF,aAAc5D,EAAM4D,cAHVY,EAAKrB,cClBZuB,MARf,WACE,OACE,wBAAQtE,UAAU,SAAlB,SACE,mBAAGA,UAAU,oBAAb,uCCcSuE,MAff,SAAuB3E,GACrB,OACE,yBAASI,UAAS,gBAAWJ,EAAM0C,QAAU,eAA3B,uBAAwD1C,EAAM2D,MAAhF,SACE,sBAAKvD,UAAU,mBAAf,UACE,wBAAQmB,KAAK,SAASZ,QAASX,EAAM4C,QAASxC,UAAU,sBACtDwE,aAAW,+CACb,oBAAIxE,UAAU,eAAd,SAA8BJ,EAAM6E,QACpC,sBAAMzE,UAAU,cAAcuD,KAAM3D,EAAM2D,KAAMmB,YAAU,EAAC1D,SAAUpB,EAAMoB,SAA3E,SACGpB,EAAM+E,iBC4CFC,MAlDf,SAA0BhF,GAExB,IAAM+C,EAAcjC,IAAM2B,WAAWI,GAFN,EAGP/B,IAAMC,SAAS,IAHR,mBAGxB4C,EAHwB,KAGlBsB,EAHkB,OAIOnE,IAAMC,SAAS,IAJtB,mBAIxBmE,EAJwB,KAIXC,EAJW,KA8B/B,OAxBArE,IAAMsE,WAAU,WACdH,EAAQlC,EAAYY,MACpBwB,EAAepC,EAAYqB,SAC1B,CAACrB,IAsBF,eAAC,EAAD,CACEL,OAAQ1C,EAAM0C,OACdE,QAAS5C,EAAM4C,QACfxB,SAfJ,SAAsBiE,GAEpBA,EAAE/D,iBAGFtB,EAAMsF,aAAa,CACjB3B,OACAS,MAAOc,KASPvB,KAAK,eACLkB,MAAM,4HALR,UAME,uBAAOtD,KAAK,OAAOnB,UAAU,uCAAuCuC,GAAG,OACrEgB,KAAK,OAAO4B,UAAU,IAAIC,UAAU,KAAK/D,MAAOkC,EAChDjC,SA5BN,SAA0B2D,GACxBJ,EAAQI,EAAE1D,OAAOF,QA2BeG,UAAQ,IACtC,sBAAMe,GAAG,aAAavC,UAAU,uBAChC,uBAAOmB,KAAK,OAAOnB,UAAU,uCAAuCuC,GAAG,aACrEgB,KAAK,QAAQ4B,UAAU,IAAIC,UAAU,MAAM/D,MAAOyD,EAClDxD,SA5BN,SAAiC2D,GAC/BF,EAAeE,EAAE1D,OAAOF,QA2BeG,UAAQ,IAC7C,sBAAMe,GAAG,mBAAmBvC,UAAU,uBACtC,wBAAQmB,KAAK,SAASnB,UAAU,gBAAhC,wECnBSqF,MA3Bf,SAAyBzF,GAEvB,IAAM0F,EAAY5E,IAAM6E,SAUxB,OACE,eAAC,EAAD,CACEjD,OAAQ1C,EAAM0C,OACdE,QAAS5C,EAAM4C,QACfxB,SAZJ,SAAsBiE,GACpBA,EAAE/D,iBACFtB,EAAM4F,eAAe,CACnB1B,OAAQwB,EAAUG,QAAQpE,QAE5B4D,EAAE1D,OAAOmE,SAQPnC,KAAK,cACLkB,MAAM,wFALR,UAME,uBAAOtD,KAAK,MAAMnB,UAAU,wCAAwCuC,GAAG,cACrEgB,KAAK,OAAOnC,YAAY,yFAAmBuE,IAAKL,EAAW9D,UAAQ,IACrE,sBAAMe,GAAG,oBAAoBvC,UAAU,uBACvC,wBAAQmB,KAAK,SAASnB,UAAU,gBAAhC,wECSS4F,MA/Bf,SAAuBhG,GAErB,IAAMiG,EAAYnF,IAAM6E,SAClBO,EAAYpF,IAAM6E,SAUxB,OACE,eAAC,EAAD,CACEjD,OAAQ1C,EAAM0C,OACdE,QAAS5C,EAAM4C,QACfxB,SAZJ,SAAsBiE,GACpBA,EAAE/D,iBACFtB,EAAMqE,WAAW,CACfV,KAAMsC,EAAUJ,QAAQpE,MACxBiC,KAAMwC,EAAUL,QAAQpE,SASxBkC,KAAK,eACLkB,MAAM,gEALR,UAME,uBAAOtD,KAAK,OAAOnB,UAAU,uCAAuCuC,GAAG,aACrEgB,KAAK,OAAOnC,YAAY,mDAAW+D,UAAU,IAAIC,UAAU,KAAKO,IAAKE,EAAWrE,UAAQ,IAC1F,sBAAMe,GAAG,mBAAmBvC,UAAU,uBACtC,uBAAOmB,KAAK,MAAMnB,UAAU,uCAAuCuC,GAAG,aACpEgB,KAAK,OAAOnC,YAAY,qGAAqBuE,IAAKG,EAAWtE,UAAQ,IACvE,sBAAMe,GAAG,mBAAmBvC,UAAU,uBACtC,wBAAQmB,KAAK,SAASnB,UAAU,gBAAhC,4DCTS+F,MAlBf,SAAoBnG,GAClB,OACE,qBAAKI,UAAS,gBAAWJ,EAAM0C,QAAU,eAA3B,wBAAd,SACE,sBAAKtC,UAAU,WAAf,UACI,wBACEA,UAAU,sBACVmB,KAAK,SACLZ,QAASX,EAAM4C,QACfgC,aAAW,+CAEb,qBAAKxE,UAAU,kBACbC,IAAKL,EAAMiD,KAAKS,KAAMnD,IAAKP,EAAMiD,KAAKU,OACxC,oBAAIvD,UAAU,wBAAd,SAAuCJ,EAAMiD,KAAKU,a,gBCL7CyC,EARO,CACpBC,QAAS,8CACTC,QAAS,CACLC,cAAe,uCACf,eAAgB,qBCoFTC,EAAM,I,WAtFjB,cAAmC,IAArBH,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,oBAChCG,KAAKC,SAAWL,EAChBI,KAAKE,SAAWL,E,oDAIlB,SAAiBM,GACf,OAAKA,EAAIC,GAGFD,EAAIE,OAFFC,QAAQC,OAAO,IAAIC,MAAJ,gDAAqBL,EAAIM,Y,6BAMnD,WACE,OAAOC,MAAM,GAAD,OAAIV,KAAKC,SAAT,UAA2B,CACrCJ,QAASG,KAAKE,SACdS,OAAQ,QAETC,KAAKZ,KAAKa,oB,4BAIb,WACE,OAAOH,MAAM,GAAD,OAAIV,KAAKC,SAAT,aAA8B,CACxCJ,QAASG,KAAKE,SACdS,OAAQ,QAETC,KAAKZ,KAAKa,oB,4BAIb,YAAiC,IAAhB3D,EAAe,EAAfA,KAAMS,EAAS,EAATA,MACrB,OAAO+C,MAAM,GAAD,OAAIV,KAAKC,SAAT,aAA8B,CACxCJ,QAASG,KAAKE,SACdS,OAAQ,QACRG,KAAMC,KAAKC,UAAU,CACnB9D,KAAMA,EACNS,MAAOA,MAGRiD,KAAKZ,KAAKa,oB,wBAIf,YAA4B,IAAf3D,EAAc,EAAdA,KAAMD,EAAQ,EAARA,KACjB,OAAOyD,MAAM,GAAD,OAAIV,KAAKC,SAAT,UAA2B,CACrCU,OAAQ,OACRd,QAASG,KAAKE,SACdY,KAAMC,KAAKC,UAAU,CAAE9D,KAAMA,EAAMD,KAAMA,MACxC2D,KAAKZ,KAAKa,oB,wBAGf,SAAW3E,GACT,OAAOwE,MAAM,GAAD,OAAIV,KAAKC,SAAT,kBAA2B/D,GAAM,CAC3CyE,OAAQ,SACRd,QAASG,KAAKE,WACbU,KAAKZ,KAAKa,oB,qBAIf,SAAQ3E,GACN,OAAOwE,MAAM,GAAD,OAAIV,KAAKC,SAAT,wBAAiC/D,GAAM,CACjDyE,OAAQ,MACRd,QAASG,KAAKE,WACbU,KAAKZ,KAAKa,oB,wBAIf,SAAW3E,GACT,OAAOwE,MAAM,GAAD,OAAIV,KAAKC,SAAT,wBAAiC/D,GAAM,CACjDyE,OAAQ,SACRd,QAASG,KAAKE,WACbU,KAAKZ,KAAKa,oB,wBAIf,SAAWI,GACT,OAAOP,MAAM,GAAD,OAAIV,KAAKC,SAAT,oBAAqC,CAC/CU,OAAQ,QACRd,QAASG,KAAKE,SACdY,KAAMC,KAAKC,UAAUC,KACpBL,KAAKZ,KAAKa,sB,KAIE,CAAQlB,GC3CduB,EAAO,I,WA7ClB,WAAYC,GAAU,oBACpBnB,KAAKC,SAAWkB,EAAQvB,QACxBI,KAAKE,SAAWiB,EAAQtB,Q,mDAG1B,SAAgBM,GACd,OAAKA,EAAIC,GAGFD,EAAIE,OAFFC,QAAQC,OAAO,IAAIC,MAAJ,gDAAqBL,EAAIM,Y,8BAKnD,SAAiBW,GACf,OAAOV,MAAM,GAAD,OAAIV,KAAKC,SAAT,aAA8B,CACxCU,OAAQ,MACRd,QAAQ,2BACHG,KAAKE,UADH,IAELmB,cAAc,UAAD,OAAYD,OAE1BR,KAAKZ,KAAKsB,mB,oBAGf,SAAO/G,EAAOE,GACZ,OAAOiG,MAAM,GAAD,OAAIV,KAAKC,SAAT,WAA4B,CACtCU,OAAQ,OACRd,QAASG,KAAKE,SACdY,KAAMC,KAAKC,UAAU,CACnBzG,MAAOA,EACPE,SAAUA,MAEXmG,KAAKZ,KAAKsB,mB,oBAGf,SAAO/G,EAAOE,GACZ,OAAOiG,MAAM,GAAD,OAAIV,KAAKC,SAAT,WAA4B,CACtCU,OAAQ,OACRd,QAASG,KAAKE,SACdY,KAAMC,KAAKC,UAAU,CACnBzG,MAAOA,EACPE,SAAUA,MAEXmG,KAAKZ,KAAKsB,qB,KAIG,CAAS,CAC3B1B,QAAS,gCACTC,QAAS,CACP,eAAgB,sBCjDL,MAA0B,mCC8P1B0B,MA1Of,WACE,IAAMC,EAAUC,cADH,EAEmBpH,IAAMC,UAAS,GAFlC,mBAENd,EAFM,KAEIkI,EAFJ,OAG+CrH,IAAMC,UAAS,GAH9D,mBAGNqH,EAHM,KAGkBC,EAHlB,OAIyCvH,IAAMC,UAAS,GAJxD,mBAINuH,EAJM,KAIeC,EAJf,OAK6CzH,IAAMC,UAAS,GAL5D,mBAKNyH,EALM,KAKiBC,EALjB,OAMmC3H,IAAMC,UAAS,GANlD,mBAMN2H,EANM,KAMYC,EANZ,OAOqC7H,IAAMC,UAAS,GAPpD,mBAON6H,EAPM,KAOaC,EAPb,OAQuC/H,IAAMC,SAAS,QARtD,mBAQNyB,EARM,KAQcsG,EARd,OASahI,IAAMC,SAAS,IAT5B,mBASNC,GATM,KASCC,GATD,QAU2BH,IAAMC,SAAS,IAV1C,qBAUNgI,GAVM,MAUQC,GAVR,SAWyBlI,IAAMC,SAAS,CACnD4C,KAAM,GACNS,MAAO,GACPF,OAAQA,IAdG,qBAWNnB,GAXM,MAWOkG,GAXP,SAgBanI,IAAMC,SAAS,IAhB5B,qBAgBNuD,GAhBM,MAgBC4E,GAhBD,MAgEb,SAASC,KACPhB,GAAY,GASd,SAASiB,KACPP,GAAqB,GAgFvB,SAASQ,KACPZ,GAAyB,GACzBJ,GAA0B,GAC1BE,GAAuB,GACvBI,GAAoB,GACpBE,GAAqB,GAGvB,OAhJA/H,IAAMsE,WAAU,YACd,WACE,IAAMkE,EAAMC,aAAaC,QAAQ,SAC7BF,GACF3B,EAAK8B,cAAcH,GAChBjC,MAAK,SAAAT,GACAA,IACF3F,GAAS2F,EAAI5F,OACbiI,GAAerC,GACfqB,EAAQyB,KAAK,KACbP,SAGHQ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MAGhCG,KACC,CAAC9J,EAAUgI,IAEdnH,IAAMsE,WAAU,WACd2B,QAAQiD,IAAI,CAACxD,EAAIyD,iBAAkBzD,EAAI0D,oBACpC7C,MAAK,YAA2B,IAAD,mBAAxB3G,EAAwB,KAAlByJ,EAAkB,KAC5BlB,GAAevI,GACfwI,GAAS,YAAIiB,OAEhBR,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,QAC3B,IAuHD,eAAC/G,EAAmBuH,SAApB,CAA6B3I,MAAOsB,GAApC,UACE,sBAAK3C,UAAU,OAAf,UAEE,cAAC,EAAD,CAAQQ,SAnGd,WACEuH,GAAY,GACZoB,aAAac,WAAW,SACxBpC,EAAQyB,KAAK,aAgGuBhJ,KAAMM,GAAOP,WAAYR,IAEzD,eAAC,IAAD,WACE,cAAC,EAAD,CACEO,KAAK,IACLT,UAAWiE,EACX/D,SAAUA,EACVqE,MAAOA,GACPH,cA5HV,WACEkE,GAA0B,IA4HlBhE,WAzHV,WACEkE,GAAuB,IAyHftE,aAlIV,WACEwE,GAAyB,IAkIjBhE,YAvHc,SAACxB,GACvB+F,GAAgB/F,GAChB0F,GAAoB,IAsHZ/E,aAjCV,SAA0BX,GACxBuD,EAAI8D,WAAWrH,EAAKE,KACjBkE,MAAK,WACJ,IAAMkD,EAAWjG,GAAMkG,QAAO,SAACC,GAAD,OAAOA,EAAEtH,MAAQF,EAAKE,OACpD+F,GAASqB,MAEVZ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,OA4BpB9F,WA5CV,SAAwBb,IACNA,EAAKI,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,GAAYI,OACvBqD,EAAIkE,WAAWzH,EAAKE,KAA5CqD,EAAImE,QAAQ1H,EAAKE,MAC1BkE,MAAK,SAACuD,GACL,IAAML,EAAWjG,GAAMC,KAAI,SAACkG,GAAD,OAAOA,EAAEtH,MAAQF,EAAKE,IAAMyH,EAAUH,KACjEvB,GAASqB,MAEVZ,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SAsCtB,cAAC,IAAD,CAAOpJ,KAAK,WAAZ,SACE,cAACK,EAAD,CAAOO,SAxGjB,SAA+BJ,EAAOE,GACpCyG,EAAKkD,OAAO3J,EAAUF,GACnBqG,MAAK,SAAAyD,GACAA,EAAKjD,QACP0B,aAAawB,QAAQ,QAASD,EAAKjD,OACnCsB,KACAlB,EAAQyB,KAAK,SAGhBC,OAAM,WACLb,EAAsB,QACtBM,aA+FE,cAAC,IAAD,CAAO5I,KAAK,WAAZ,SACE,cAACqB,EAAD,CAAUT,SA5FpB,SAAkCJ,EAAOE,GACvCyG,EAAKqD,OAAO9J,EAAUF,GACnBqG,MAAK,SAAAT,GACAA,GACFkC,EAAsB,WACtBb,EAAQyB,KAAK,aAEbZ,EAAsB,WAGzBa,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,MACzBqB,SAAQ,WACP7B,gBAoFCnJ,GAAY,cAAC,EAAD,OAGf,cAAC,EAAD,CACEyC,OAAQ0F,EACRxF,QAASyG,GACT/D,aA7EN,SAA0BwF,GACxBtE,EAAI0E,eAAeJ,GAChBzD,MAAK,SAAC8D,GACLlC,GAAekC,GACf9B,QAEDM,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SA0E1B,cAAC,EAAD,CACElH,OAAQ8F,EACR5F,QAASyG,GACTzD,eA5FN,SAA4BkF,GAC1BtE,EAAI4E,WAAWN,GACZzD,MAAK,SAAC8D,GACLlC,GAAekC,GACf9B,QAEDM,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SAyF1B,cAAC,EAAD,CACElH,OAAQ4F,EACR1F,QAASyG,GACThF,WAhFN,SAA2ByG,GACzBtE,EAAI6E,WAAWP,GACZzD,MAAK,SAACuD,GACL1B,GAAS,CAAC0B,GAAF,mBAActG,MACtB+E,QAEDM,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,SA6E1B,cAAC,EAAD,CACEjG,KAAK,cACLkB,MAAM,0DAFR,SAGE,wBAAQtD,KAAK,SAASnB,UAAU,sCAAhC,4BAGF,cAAC0B,EAAmBsI,SAApB,CAA6B3I,MAAOO,EAAoBQ,GAAxD,SACE,cAACD,EAAD,CACEG,OAAQkG,EACRhG,QAASyG,GACTpJ,SAAUA,MAId,cAAC,EAAD,CACEyC,OAAQgG,EACR9F,QAASyG,GACTpG,KAAM8F,SCjPduC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJC,SAASC,eAAe,W","file":"static/js/main.3fbb9b5c.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n  )}\r\n\r\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\n\r\nimport { NavLink, Route } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} className=\"header__logo\" alt=\"Место\" />\r\n      <nav className=\"header__nav\">\r\n        <Route path=\"/sign-up\">\r\n          <NavLink to='/sign-in' className=\"link header__nav-link\">Войти</NavLink>\r\n        </Route>\r\n        <Route path=\"/sign-in\">\r\n          <NavLink to='/sign-up' className=\"link header__nav-link\">Зарегистрироваться</NavLink>\r\n        </Route>\r\n        {props.isLoggedIn && (<Route path=\"/\">\r\n          <p className=\"header__user-info\">{props.user}</p>\r\n          <button onClick={props.onLogout} className=\"link header__nav-link\">Выйти</button>\r\n        </Route>)}\r\n      </nav>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Login(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleEmailChange(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    if (!password || !email) {\r\n      return;\r\n    }\r\n    props.onSubmit(password, email);\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"auth\">\r\n        <form className=\"auth-form\"\r\n              onSubmit={handleSubmit}\r\n        >\r\n          <h2 className=\"auth-form__title\">Вход</h2>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            className=\"auth-form__input\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className=\"auth-form__input\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            required\r\n          />\r\n          <button type=\"submit\"\r\n                  className=\"auth-form__submit\"\r\n                  value=\"loggedIn\"          >\r\n            Войти\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"auth__redirect\">\r\n          Ещё не зарегистрированы? \r\n          {<Link to=\"/signup\" className=\"link\">\r\n            Регистриация\r\n          </Link>}\r\n        </p>\r\n      </section>\r\n    </main>\r\n  )\r\n}","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function Register(props) {\r\n  const [password, setPassword] = React.useState('');\r\n  const [email, setEmail] = React.useState('');\r\n\r\n  function handleEmailChange(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    props.onSubmit(password, email);\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"auth\">\r\n        <form className=\"auth-form\"\r\n              onSubmit={handleSubmit}\r\n        >\r\n          <h2 className=\"auth-form__title\">Регистрация</h2>\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            className=\"auth-form__input\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className=\"auth-form__input\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            required\r\n          />\r\n          <button type=\"submit\"\r\n            className=\"auth-form__submit\"\r\n          >\r\n            Зарегистрироваться\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"auth__redirect\">\r\n          Уже зарегистрированы? \r\n          {<Link to=\"/sign-in\" className=\"link\">\r\n            Войти\r\n          </Link>}\r\n        </p>\r\n      </section>\r\n    </main>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/icon-ok.e004e6e7.svg\";","export default __webpack_public_path__ + \"static/media/icon-cross.471086c8.svg\";","import React from \"react\";\nimport iconOk from '../images/icon-ok.svg';\nimport iconFail from '../images/icon-cross.svg';\n\nexport const InfoTooltipContext = React.createContext();\n\nexport const infoTooltipCaptions = {\n  success: {\n    text: 'Вы успешно зарегистрировались!',\n    imgPath: iconOk\n  },\n  fail: {\n    text: 'Что-то пошло не так!\\n' +\n      'Попробуйте ещё раз.',\n    imgPath: iconFail\n  }\n}\n","import React from \"react\";\r\nimport { InfoTooltipContext } from \"../contexts/infoTooltipContext\";\r\n\r\nexport default function InfoTooltip(props) {\r\n  const infoTooltipContext = React.useContext(InfoTooltipContext);\r\n\r\n  return (\r\n    <section className={`popup ${props.isOpen && 'popup_opened'}`}\r\n             id=\"popup__infoTooltip\"\r\n    >\r\n      <div className=\"infoTooltip\">\r\n        <img className=\"infoTooltip__icon\"\r\n             src={infoTooltipContext.imgPath}\r\n             alt=\"Результат регистрации\"\r\n        />\r\n        <p className=\"infoTooltip__caption\">\r\n          {infoTooltipContext.text}\r\n        </p>\r\n        <button onClick={props.onClose}\r\n                type=\"button\"\r\n                className=\"popup__close-button\"        >\r\n        </button>\r\n      </div>\r\n    </section>\r\n  )\r\n}","export default __webpack_public_path__ + \"static/media/like-button.df0c9655.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\r\nimport likeButton from '../images/like-button.svg';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  const isOwn = props.card.owner._id === currentUser._id;\r\n\r\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n  const cardLikeButtonClassName = `cards__like-button ${isLiked ? 'cards__like-button_active' : ''}`;\r\n\r\n  const cardDeleteButtonClassName = `cards__remove-button ${isOwn ? '' : 'cards__remove-button_hidden'}`;\r\n\r\n\r\n  function handleCardClick() {\r\n    props.onClick(props.card);\r\n  }\r\n\r\n  function handleLikeClick() {\r\n    props.onCardLike(props.card)\r\n  }\r\n\r\n  function handleCardDelete() {\r\n    props.onCardDelete(props.card)\r\n  }\r\n\r\n  return (\r\n    <div className=\"cards__item\">\r\n      <img className=\"cards__image\" src={props.card.link} alt={props.card.name} onClick={handleCardClick} />\r\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleCardDelete} />\r\n      <div className=\"cards__description\">\r\n        <h2 className=\"cards__title\">{props.card.name}</h2>\r\n        <div className=\"cards__like-container\">\r\n          <img src={likeButton} className={cardLikeButtonClassName} alt=\"Лайк\" onClick={handleLikeClick} />\r\n          <span className=\"cards__like-number\">{props.card.likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Card;\r\n","import React from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар профиля\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__title\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"profile__edit-button\" onClick={props.onEditProfile} type=\"button\" />\r\n          </div>\r\n          <p className=\"profile__profession\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__add-button\" onClick={props.onAddPlace} type=\"button\" />\r\n      </section>\r\n\r\n      <section className=\"cards\">\r\n        {props.cards.map(item =>\r\n          (<Card key={item._id} card={item}\r\n            onClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />)\r\n          )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <section className={`popup ${props.isOpen && 'popup_opened'} popup_type_${props.name}`}>\r\n      <div className=\"popup__container\">\r\n        <button type=\"button\" onClick={props.onClose} className=\"popup__close-button\" \r\n          aria-label=\"Закрыть\" />\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form className=\"popup__form\" name={props.name} noValidate onSubmit={props.onSubmit} >\r\n          {props.children}\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\">\r\n      <input type=\"text\" className=\"popup__input popup__input_name-field\" id=\"name\"\r\n        name=\"name\" minLength=\"2\" maxLength=\"40\" value={name}\r\n        onChange={handleNameChange} required />\r\n      <span id='name-error' className='popup__input-error'></span>\r\n      <input type=\"text\" className=\"popup__input popup__input_profession\" id=\"profession\"\r\n        name=\"about\" minLength=\"2\" maxLength=\"200\" value={description}\r\n        onChange={handleDescriptionChange} required />\r\n      <span id='profession-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n    e.target.reset();\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-avatar\"\r\n      title=\"Обновить аватар\">\r\n      <input type=\"url\" className=\"popup__input popup__input_avatar-link\" id=\"avatar-link\"\r\n        name=\"link\" placeholder=\"Ссылка на аватар\" ref={avatarRef} required />\r\n      <span id='avatar-link-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n  const inputName = React.useRef();\r\n  const inputLink = React.useRef();\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    props.onAddPlace({\r\n      name: inputName.current.value,\r\n      link: inputLink.current.value\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"add-new-card\"\r\n      title=\"Новое место\">\r\n      <input type=\"text\" className=\"popup__input popup__input_place-name\" id=\"place-name\"\r\n        name=\"name\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\" ref={inputName} required />\r\n      <span id='place-name-error' className='popup__input-error'></span>\r\n      <input type=\"url\" className=\"popup__input popup__input_place-link\" id=\"place-link\"\r\n        name=\"link\" placeholder=\"Ссылка на картинку\" ref={inputLink} required />\r\n      <span id='place-link-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Создать</button>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup\r\n","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n  return (\r\n    <div className={`popup ${props.isOpen && 'popup_opened'} popup_type_lightbox`}>\r\n      <div className=\"lightbox\">\r\n          <button\r\n            className=\"popup__close-button\"\r\n            type=\"button\"\r\n            onClick={props.onClose}\r\n            aria-label=\"Закрыть\"\r\n          />\r\n          <img className=\"lightbox__image\"\r\n            src={props.card.link} alt={props.card.name} />\r\n          <h2 className=\"lightbox__image-title\">{props.card.name}</h2>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ImagePopup\r\n","\r\nconst requestParams = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19',\r\n  headers: {\r\n      authorization: 'd9b0d4bd-9467-4294-aae9-066f4b6515ac',\r\n      'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nexport default requestParams\r\n","import requestParams from './constants.js';\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  // Общий обработчик запросов\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  // Получаем массив существующих карточек\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Получаем основные данные текущего профиля\r\n  getProfileData() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Отправляем обновленную информацию профиля\r\n  setProfileData({ name, about }) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'PATCH',\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about\r\n      })\r\n      })\r\n      .then(this._getResponseData)\r\n  }\r\n\r\n  // Создание и удаление карточки\r\n  createCard({ name, link }) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ name: name, link: link })\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Установка и снятие лайка для карточки\r\n  putLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Обновление аватара\r\n  editAvatar(avatarUrl) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(avatarUrl)\r\n    }).then(this._getResponseData)\r\n  }\r\n}\r\n\r\nexport const api = new Api(requestParams);","class Auth {\r\n  constructor(options) {\r\n    this._baseUrl = options.baseUrl;\r\n    this._headers = options.headers;\r\n  }\r\n  \r\n  _handleResponse(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(new Error(`Ошибка: ${res.status}`));        \r\n    } \r\n    return res.json();\r\n  }\r\n  \r\n  getUserLoginInfo(token) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: \"GET\",\r\n      headers: {\r\n        ...this._headers,\r\n        Authorization: `Bearer ${token}`,\r\n      },\r\n    }).then(this._handleResponse);\r\n  }\r\n \r\n  signUp(email, password) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n  \r\n  signIn(email, password) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    }).then(this._handleResponse);\r\n  }\r\n}\r\n  \r\nexport const auth = new Auth({\r\n  baseUrl: \"https://auth.nomoreparties.co\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});","export default __webpack_public_path__ + \"static/media/avatar.74c3c0fb.jpg\";","import React from 'react';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport Header from './Header';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport { api } from '../utils/api';\r\nimport { auth } from '../utils/auth';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { InfoTooltipContext, infoTooltipCaptions } from '../contexts/infoTooltipContext';\r\nimport avatar from '../images/avatar.jpg';\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\r\n  const [infoTooltipContext, setInfoTooltipContext] = React.useState('fail');\r\n  const [email, setEmail] = React.useState('');\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [currentUser, setCurrentUser] = React.useState({\r\n    name: '',\r\n    about: '',\r\n    avatar: avatar\r\n  });\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n  \r\n  React.useEffect(() => {\r\n    function tokenCheck() {\r\n      const jwt = localStorage.getItem('token');\r\n      if (jwt) {\r\n        auth.UserLoginInfo(jwt)\r\n          .then(res => {\r\n            if (res) {\r\n              setEmail(res.email);\r\n              setCurrentUser(res);\r\n              history.push('/');\r\n              handleLogin();\r\n            }\r\n          })\r\n          .catch(err => console.log(err))\r\n      }\r\n    }\r\n    tokenCheck();\r\n  }, [loggedIn, history]);\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getProfileData(), api.getInitialCards()])\r\n      .then(([user, initialCards]) => {\r\n          setCurrentUser(user);\r\n          setCards([...initialCards]);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, [])\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true);\r\n  };\r\n  \r\n  function handleLogin() {\r\n    setLoggedIn(true);\r\n  }\r\n\r\n  function handleLogout() {\r\n    setLoggedIn(false);\r\n    localStorage.removeItem('token');\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  function handleInfoTooltipOpen() {\r\n    setIsInfoTooltipOpen(true);\r\n  }\r\n\r\n  function handleLoginFormSubmit(email, password) {\r\n    auth.singIn(password, email)\r\n      .then(data => {\r\n        if (data.token) {\r\n          localStorage.setItem('token', data.token);\r\n          handleLogin();\r\n          history.push('/');\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setInfoTooltipContext('fail');\r\n        handleInfoTooltipOpen();\r\n      })\r\n  }\r\n\r\n  function handleRegisterFormSubmit(email, password) {\r\n    auth.singUp(password, email)\r\n      .then(res => {\r\n        if (res) {\r\n          setInfoTooltipContext('success');\r\n          history.push('/sign-in');\r\n        } else {\r\n          setInfoTooltipContext('fail');\r\n        }\r\n      })\r\n      .catch(err => console.log(err))\r\n      .finally(() => {\r\n        handleInfoTooltipOpen();\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(data){\r\n    api.editAvatar(data)\r\n      .then((newData) => {\r\n        setCurrentUser(newData);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    api.setProfileData(data)\r\n      .then((newData) => {\r\n        setCurrentUser(newData);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleUpdateCards(data) {\r\n    api.createCard(data)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    (!isLiked ? api.putLike(card._id) : api.deleteLike(card._id))\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== card._id);\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsImagePopupOpen(false);    \r\n    setIsInfoTooltipOpen(false);\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n\r\n        <Header onLogout={handleLogout} user={email} isLoggedIn={loggedIn} />\r\n\r\n        <Switch>\r\n          <ProtectedRoute \r\n            path=\"/\" \r\n            component={Main} \r\n            loggedIn={loggedIn}\r\n            cards={cards}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            onCardDelete={handleCardDelete}\r\n            onCardLike={handleCardLike} />\r\n          <Route path=\"/sign-in\">\r\n            <Login onSubmit={handleLoginFormSubmit} />\r\n          </Route>\r\n          <Route path=\"/sign-up\">\r\n            <Register onSubmit={handleRegisterFormSubmit} />\r\n          </Route>\r\n                           \r\n        </Switch>\r\n        {loggedIn && <Footer />}\r\n      </div>\r\n\r\n      <EditProfilePopup \r\n        isOpen={isEditProfilePopupOpen} \r\n        onClose={closeAllPopups} \r\n        onUpdateUser={handleUpdateUser} \r\n      />\r\n\r\n      <EditAvatarPopup \r\n        isOpen={isEditAvatarPopupOpen} \r\n        onClose={closeAllPopups} \r\n        onUpdateAvatar={handleUpdateAvatar} \r\n      />\r\n\r\n      <AddPlacePopup \r\n        isOpen={isAddPlacePopupOpen} \r\n        onClose={closeAllPopups} \r\n        onAddPlace={handleUpdateCards}\r\n      />\r\n\r\n      <PopupWithForm\r\n        name=\"delete-card\"\r\n        title=\"Вы уверены\">\r\n        <button type=\"submit\" className=\"popup__submit popup__submit-confirm\">Да</button>\r\n      </PopupWithForm>\r\n\r\n      <InfoTooltipContext.Provider value={infoTooltipCaptions[infoTooltipContext]}>\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipOpen}\r\n          onClose={closeAllPopups}\r\n          loggedIn={loggedIn}\r\n        />\r\n      </InfoTooltipContext.Provider>\r\n\r\n      <ImagePopup\r\n        isOpen={isImagePopupOpen}\r\n        onClose={closeAllPopups}\r\n        card={selectedCard}\r\n      />\r\n\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter >\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}