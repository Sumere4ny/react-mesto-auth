{"version":3,"sources":["components/ProtectedRoute.js","images/logo.svg","components/Header.js","components/Login.js","components/Register.js","images/icon-ok.svg","images/icon-cross.svg","contexts/infoTooltipContext.js","components/InfoTooltip.js","images/like-button.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/constants.js","utils/api.js","utils/auth.js","images/avatar.jpg","components/App.js","index.js"],"names":["ProtectedRoute","Component","component","props","loggedIn","to","Header","className","src","logo","alt","path","isLoggedIn","email","onClick","onLogout","Login","React","useState","setEmail","password","setPassword","onSubmit","evt","preventDefault","type","placeholder","value","onChange","target","required","Register","InfoTooltipContext","createContext","infoTooltipCaptions","success","text","imgPath","iconOk","fail","iconFail","InfoTooltip","infoTooltipContext","useContext","isOpen","id","onClose","CurrentUserContext","Card","currentUser","isOwn","card","owner","_id","isLiked","likes","some","i","cardLikeButtonClassName","cardDeleteButtonClassName","link","name","onError","e","onCardDelete","likeButton","onCardLike","length","Main","onEditAvatar","avatar","onEditProfile","about","onAddPlace","cards","map","item","onCardClick","Footer","PopupWithForm","aria-label","title","noValidate","children","EditProfilePopup","setName","description","setDescription","useEffect","onUpdateUser","minLength","maxLength","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","reset","ref","AddPlacePopup","inputName","inputLink","ImagePopup","requestParams","baseUrl","headers","authorization","api","this","_baseUrl","_headers","res","ok","json","Promise","reject","Error","status","fetch","method","then","_getResponseData","body","JSON","stringify","avatarUrl","auth","options","token","Authorization","_handleResponse","App","history","useHistory","setLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","setInfoTooltipContext","selectedCard","setSelectedCard","setCurrentUser","setCards","handleLogin","handleInfoTooltipOpen","closeAllPopups","jwt","localStorage","getItem","getUserLoginInfo","push","catch","err","console","log","tokenCheck","all","getProfileData","getInitialCards","user","initialCards","Provider","removeItem","exact","deleteCard","newCards","filter","c","deleteLike","putLike","newCard","signIn","data","setItem","signUp","finally","setProfileData","newData","editAvatar","createCard","ReactDOM","render","StrictMode","basename","process","document","getElementById"],"mappings":"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","file":"static/js/main.cc384503.chunk.js","sourcesContent":["import React from 'react';\r\nimport { Route, Redirect } from \"react-router-dom\";\r\n\r\nconst ProtectedRoute = ({ component: Component, ...props  }) => {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\r\n      }\r\n    </Route>\r\n  )}\r\n\r\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/logo.c2821b38.svg\";","import logo from '../images/logo.svg';\r\n\r\nimport { NavLink, Route } from 'react-router-dom';\r\n\r\nfunction Header(props) {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={logo} className=\"header__logo\" alt=\"Место\" />\r\n      <nav className=\"header__nav\">\r\n        <Route path=\"/sign-up\">\r\n          <NavLink to='/sign-in' className=\"link header__nav-link\">Войти</NavLink>\r\n        </Route>\r\n        <Route path=\"/sign-in\">\r\n          <NavLink to='/sign-up' className=\"link header__nav-link\">Зарегистрироваться</NavLink>\r\n        </Route>\r\n        {props.isLoggedIn && (<Route path=\"/\">\r\n          <p className=\"header__user-info\">{props.email}</p>\r\n          <button onClick={props.onLogout} className=\"link header__nav-link\">Выйти</button>\r\n        </Route>)}\r\n      </nav>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Login(props) {\r\n  const [email, setEmail] = React.useState('');\r\n  const [password, setPassword] = React.useState('');\r\n\r\n  function handleEmailChange(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    if (!password || !email) {\r\n      return;\r\n    }\r\n    props.onSubmit(password, email);\r\n    setEmail('');\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"auth\">\r\n        <h2 className=\"auth-form__title\">Вход</h2>\r\n        <form className=\"auth-form\"\r\n              onSubmit={handleSubmit}\r\n        >\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            className=\"auth-form__input\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className=\"auth-form__input\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            required\r\n          />\r\n          <button type=\"submit\"\r\n                  className=\"auth-form__submit\"\r\n                  value=\"loggedIn\"          >\r\n            Войти\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"auth__redirect\">\r\n          Ещё не зарегистрированы? {<Link to=\"/sign-up\"\r\n            className=\"link\">\r\n            Регистриация\r\n          </Link>}\r\n        </p>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Login\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction Register(props) {\r\n  const [password, setPassword] = React.useState('');\r\n  const [email, setEmail] = React.useState('');\r\n\r\n  function handleEmailChange(evt) {\r\n    setEmail(evt.target.value);\r\n  }\r\n\r\n  function handlePasswordChange(evt) {\r\n    setPassword(evt.target.value);\r\n  }\r\n\r\n  const handleSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    props.onSubmit(password, email);\r\n    setPassword('');\r\n  }\r\n\r\n  return (\r\n    <main>\r\n      <section className=\"auth\">\r\n      <h2 className=\"auth-form__title\">Регистрация</h2>\r\n        <form className=\"auth-form\"\r\n              onSubmit={handleSubmit}\r\n        >\r\n          <input\r\n            type=\"email\"\r\n            placeholder=\"Email\"\r\n            className=\"auth-form__input\"\r\n            value={email}\r\n            onChange={handleEmailChange}\r\n            required\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            placeholder=\"Пароль\"\r\n            className=\"auth-form__input\"\r\n            value={password}\r\n            onChange={handlePasswordChange}\r\n            required\r\n          />\r\n          <button type=\"submit\"\r\n            className=\"auth-form__submit\"\r\n          >\r\n            Зарегистрироваться\r\n          </button>\r\n        </form>\r\n\r\n        <p className=\"auth__redirect\">\r\n          Уже зарегистрированы? {<Link to=\"/sign-in\"\r\n            className=\"link\">\r\n            Войти\r\n          </Link>}\r\n        </p>\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Register\r\n","export default __webpack_public_path__ + \"static/media/icon-ok.e004e6e7.svg\";","export default __webpack_public_path__ + \"static/media/icon-cross.471086c8.svg\";","import React from \"react\";\r\nimport iconOk from '../images/icon-ok.svg';\r\nimport iconFail from '../images/icon-cross.svg';\r\n\r\nexport const InfoTooltipContext = React.createContext();\r\n\r\nexport const infoTooltipCaptions = {\r\n  success: {\r\n    text: 'Вы успешно зарегистрировались!',\r\n    imgPath: iconOk\r\n  },\r\n  fail: {\r\n    text: 'Что-то пошло не так!\\n' +\r\n      'Попробуйте ещё раз.',\r\n    imgPath: iconFail\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport { InfoTooltipContext } from \"../contexts/infoTooltipContext\";\r\n\r\nexport default function InfoTooltip(props) {\r\n  const infoTooltipContext = React.useContext(InfoTooltipContext);\r\n\r\n  return (\r\n    <section className={`popup ${props.isOpen && 'popup_opened'}`}\r\n      id=\"popup__infoTooltip\"\r\n    >\r\n      <div className=\"infoTooltip popup__container\">\r\n        <img className=\"infoTooltip__icon\"\r\n          src={infoTooltipContext.imgPath}\r\n          alt=\"Результат регистрации\"\r\n        />\r\n        <p className=\"infoTooltip__caption\">\r\n          {infoTooltipContext.text}\r\n        </p>\r\n        <button onClick={props.onClose}\r\n          type=\"button\"\r\n          className=\"popup__close-button\"        >\r\n        </button>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/like-button.df0c9655.svg\";","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n","import React from 'react';\nimport likeButton from '../images/like-button.svg';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner._id === currentUser._id;\n\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n  const cardLikeButtonClassName = `cards__like-button ${isLiked ? 'cards__like-button_active' : ''}`;\n\n  const cardDeleteButtonClassName = `cards__remove-button ${isOwn ? '' : 'cards__remove-button_hidden'}`;\n\n\n  function handleCardClick() {\n    props.onClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card)\n  }\n\n  function handleCardDelete() {\n    props.onCardDelete(props.card)\n  }\n\n  return (\n    <div className=\"cards__item\">\n      <img className=\"cards__image\"\n        src={props.card.link}\n        alt={props.card.name}\n        onClick={handleCardClick}\n        onError={(e) => e.target.src = 'https://chelyabinsk.artdeco-shop.ru/img/dummy.png'} />\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleCardDelete} />\n      <div className=\"cards__description\">\n        <h2 className=\"cards__title\">{props.card.name}</h2>\n        <div className=\"cards__like-container\">\n          <img src={likeButton} className={cardLikeButtonClassName} alt=\"Лайк\" onClick={handleLikeClick} />\n          <span className=\"cards__like-number\">{props.card.likes.length}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React from 'react';\r\nimport Card from './Card';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <div className=\"profile__avatar-container\" onClick={props.onEditAvatar}>\r\n          <img className=\"profile__avatar\" src={currentUser.avatar} alt=\"Аватар профиля\" />\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__title\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <button className=\"profile__edit-button\" onClick={props.onEditProfile} type=\"button\" />\r\n          </div>\r\n          <p className=\"profile__profession\">{currentUser.about}</p>\r\n        </div>\r\n        <button className=\"profile__add-button\" onClick={props.onAddPlace} type=\"button\" />\r\n      </section>\r\n\r\n      <section className=\"cards\">\r\n        {props.cards.map(item =>\r\n          (<Card key={item._id} card={item}\r\n            onClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />)\r\n          )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer\r\n","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n  return (\r\n    <section className={`popup ${props.isOpen && 'popup_opened'} popup_type_${props.name}`}>\r\n      <div className=\"popup__container\">\r\n        <button type=\"button\" onClick={props.onClose} className=\"popup__close-button\" \r\n          aria-label=\"Закрыть\" />\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form className=\"popup__form\" name={props.name} noValidate onSubmit={props.onSubmit} >\r\n          {props.children}\r\n        </form>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default PopupWithForm\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  function handleNameChange(e) {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  function handleDescriptionChange(e) {\r\n    setDescription(e.target.value)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-profile\"\r\n      title=\"Редактировать профиль\">\r\n      <input type=\"text\" className=\"popup__input popup__input_name-field\" id=\"name\"\r\n        name=\"name\" minLength=\"2\" maxLength=\"40\" value={name}\r\n        onChange={handleNameChange} required />\r\n      <span id='name-error' className='popup__input-error'></span>\r\n      <input type=\"text\" className=\"popup__input popup__input_profession\" id=\"profession\"\r\n        name=\"about\" minLength=\"2\" maxLength=\"200\" value={description}\r\n        onChange={handleDescriptionChange} required />\r\n      <span id='profession-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditProfilePopup\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n  const avatarRef = React.useRef();\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateAvatar({\r\n      avatar: avatarRef.current.value,\r\n    });\r\n    e.target.reset();\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"edit-avatar\"\r\n      title=\"Обновить аватар\">\r\n      <input type=\"url\" className=\"popup__input popup__input_avatar-link\" id=\"avatar-link\"\r\n        name=\"link\" placeholder=\"Ссылка на аватар\" ref={avatarRef} required />\r\n      <span id='avatar-link-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Сохранить</button>\r\n    </PopupWithForm>\r\n  );\r\n}\r\n\r\nexport default EditAvatarPopup\r\n","import React from 'react';\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n  const inputName = React.useRef();\r\n  const inputLink = React.useRef();\r\n\r\n  function handleSubmit(e){\r\n    e.preventDefault();\r\n    props.onAddPlace({\r\n      name: inputName.current.value,\r\n      link: inputLink.current.value\r\n    });\r\n  }\r\n\r\n  return(\r\n    <PopupWithForm\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      name=\"add-new-card\"\r\n      title=\"Новое место\">\r\n      <input type=\"text\" className=\"popup__input popup__input_place-name\" id=\"place-name\"\r\n        name=\"name\" placeholder=\"Название\" minLength=\"2\" maxLength=\"30\" ref={inputName} required />\r\n      <span id='place-name-error' className='popup__input-error'></span>\r\n      <input type=\"url\" className=\"popup__input popup__input_place-link\" id=\"place-link\"\r\n        name=\"link\" placeholder=\"Ссылка на картинку\" ref={inputLink} required />\r\n      <span id='place-link-error' className='popup__input-error'></span>\r\n      <button type=\"submit\" className=\"popup__submit\">Создать</button>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup\r\n","import React from 'react';\n\nfunction ImagePopup(props) {\n  return (\n    <div className={`popup ${props.isOpen && 'popup_opened'} popup_type_lightbox`}>\n      <div className=\"lightbox\">\n          <button\n            className=\"popup__close-button\"\n            type=\"button\"\n            onClick={props.onClose}\n            aria-label=\"Закрыть\"\n          />\n          <img className=\"lightbox__image\"\n            src={props.card.link}\n            alt={props.card.name}\n            onError={(e) => e.target.src = 'https://chelyabinsk.artdeco-shop.ru/img/dummy.png'}/>\n          <h2 className=\"lightbox__image-title\">{props.card.name}</h2>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup\n","\nconst requestParams = {\n  baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-19',\n  headers: {\n      authorization: 'd9b0d4bd-9467-4294-aae9-066f4b6515ac',\n      'Content-Type': 'application/json'\n  }\n};\n\nexport default requestParams\n","import requestParams from './constants.js';\r\n\r\nclass Api {\r\n  constructor({ baseUrl, headers }) {\r\n    this._baseUrl = baseUrl;\r\n    this._headers = headers;\r\n  }\r\n\r\n  // Общий обработчик запросов\r\n  _getResponseData(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(new Error(`Ошибка: ${res.status}`));\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  // Получаем массив существующих карточек\r\n  getInitialCards() {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Получаем основные данные текущего профиля\r\n  getProfileData() {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'GET'\r\n    })\r\n    .then(this._getResponseData);\r\n  }\r\n\r\n  // Отправляем обновленную информацию профиля\r\n  setProfileData({ name, about }) {\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      headers: this._headers,\r\n      method: 'PATCH',\r\n      body: JSON.stringify({\r\n        name: name,\r\n        about: about\r\n      })\r\n      })\r\n      .then(this._getResponseData)\r\n  }\r\n\r\n  // Создание и удаление карточки\r\n  createCard({ name, link }) {\r\n    return fetch(`${this._baseUrl}/cards`, {\r\n      method: \"POST\",\r\n      headers: this._headers,\r\n      body: JSON.stringify({ name: name, link: link })\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  deleteCard(id) {\r\n    return fetch(`${this._baseUrl}/cards/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Установка и снятие лайка для карточки\r\n  putLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"PUT\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n\r\n  }\r\n\r\n  deleteLike(id) {\r\n    return fetch(`${this._baseUrl}/cards/likes/${id}`, {\r\n      method: \"DELETE\",\r\n      headers: this._headers,\r\n    }).then(this._getResponseData)\r\n  }\r\n\r\n  // Обновление аватара\r\n  editAvatar(avatarUrl) {\r\n    return fetch(`${this._baseUrl}/users/me/avatar`, {\r\n      method: \"PATCH\",\r\n      headers: this._headers,\r\n      body: JSON.stringify(avatarUrl)\r\n    }).then(this._getResponseData)\r\n  }\r\n}\r\n\r\nexport const api = new Api(requestParams);\r\n","import requestParams from './constants.js';\n\nclass Auth {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _handleResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(new Error(`Ошибка: ${res.status}`));\n    }\n    return res.json();\n  }\n\n  getUserLoginInfo(token) {\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: \"GET\",\n      headers: {\n        ...this._headers,\n        Authorization: `Bearer ${token}`,\n      },\n    }).then(this._handleResponse);\n  }\n\n  signUp(email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        email: email,\n        password: password,\n      }),\n    }).then(this._handleResponse);\n  }\n\n  signIn(email, password) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        email: email,\n        password: password,\n      }),\n    }).then(this._handleResponse);\n  }\n}\n\nexport const auth = new Auth({\n  baseUrl: \"https://auth.nomoreparties.co\",\n  headers: {\n    \"Content-Type\": \"application/json\",\n  },\n});\n","export default __webpack_public_path__ + \"static/media/avatar.74c3c0fb.jpg\";","import React from 'react';\r\nimport ProtectedRoute from './ProtectedRoute';\r\nimport Header from './Header';\r\nimport Login from './Login';\r\nimport Register from './Register';\r\nimport InfoTooltip from './InfoTooltip';\r\nimport Main from './Main';\r\nimport Footer from './Footer';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport EditProfilePopup from './EditProfilePopup';\r\nimport EditAvatarPopup from './EditAvatarPopup';\r\nimport AddPlacePopup from './AddPlacePopup';\r\nimport ImagePopup from './ImagePopup';\r\nimport { api } from '../utils/api';\r\nimport { auth } from '../utils/auth';\r\nimport { Route, Switch, useHistory } from 'react-router-dom';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\nimport { InfoTooltipContext, infoTooltipCaptions } from '../contexts/infoTooltipContext';\r\nimport avatar from '../images/avatar.jpg';\r\n\r\nfunction App() {\r\n  const history = useHistory();\r\n  const [loggedIn, setLoggedIn] = React.useState(false);\r\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\r\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\r\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\r\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\r\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\r\n  const [infoTooltipContext, setInfoTooltipContext] = React.useState('fail');\r\n  const [email, setEmail] = React.useState('');\r\n  const [selectedCard, setSelectedCard] = React.useState({});\r\n  const [currentUser, setCurrentUser] = React.useState({\r\n    name: '',\r\n    about: '',\r\n    avatar: avatar\r\n  });\r\n  const [cards, setCards] = React.useState([]);\r\n\r\n\r\n  React.useEffect(() => {\r\n    function tokenCheck() {\r\n      const jwt = localStorage.getItem('token');\r\n      if (jwt) {\r\n        auth.getUserLoginInfo(jwt)\r\n          .then(res => {\r\n            if (res) {\r\n              setEmail(res.email);\r\n              history.push('/');\r\n              handleLogin();\r\n            }\r\n          })\r\n          .catch(err => console.log(err))\r\n      }\r\n    }\r\n    tokenCheck();\r\n  }, [loggedIn, history]);\r\n\r\n  React.useEffect(() => {\r\n    Promise.all([api.getProfileData(), api.getInitialCards()])\r\n      .then(([user, initialCards]) => {\r\n          setCurrentUser(user);\r\n          setCards([...initialCards]);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }, [])\r\n\r\n  function handleEditAvatarClick() {\r\n    setIsEditAvatarPopupOpen(true);\r\n  }\r\n\r\n  function handleEditProfileClick() {\r\n    setIsEditProfilePopupOpen(true);\r\n  }\r\n\r\n  function handleAddPlaceClick() {\r\n    setIsAddPlacePopupOpen(true);\r\n  }\r\n\r\n  const handleCardClick = (card) => {\r\n    setSelectedCard(card);\r\n    setIsImagePopupOpen(true);\r\n  };\r\n\r\n  function handleLogin() {\r\n    setLoggedIn(true);\r\n  }\r\n\r\n  function handleLogout() {\r\n    setLoggedIn(false);\r\n    localStorage.removeItem('token');\r\n    history.push('/sign-in');\r\n  }\r\n\r\n  function handleInfoTooltipOpen() {\r\n    setIsInfoTooltipOpen(true);\r\n  }\r\n\r\n  function handleLoginFormSubmit(email, password) {\r\n    auth.signIn(password, email)\r\n      .then(data => {\r\n        if (data.token) {\r\n          localStorage.setItem('token', data.token);\r\n          handleLogin();\r\n          history.push('/');\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setInfoTooltipContext('fail');\r\n        handleInfoTooltipOpen();\r\n      })\r\n  }\r\n\r\n  function handleRegisterFormSubmit(email, password) {\r\n    auth.signUp(password, email)\r\n      .then(res => {\r\n        if (res) {\r\n          setInfoTooltipContext('success');\r\n          history.push('/sign-in');\r\n        } else {\r\n          setInfoTooltipContext('fail');\r\n        }\r\n      })\r\n      .catch(err => console.log(err))\r\n      .finally(() => {\r\n        handleInfoTooltipOpen();\r\n      })\r\n  }\r\n\r\n  function handleUpdateAvatar(data){\r\n    api.editAvatar(data)\r\n      .then((newData) => {\r\n        setCurrentUser(newData);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleUpdateUser(data) {\r\n    api.setProfileData(data)\r\n      .then((newData) => {\r\n        setCurrentUser(newData);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleUpdateCards(data) {\r\n    api.createCard(data)\r\n      .then((newCard) => {\r\n        setCards([newCard, ...cards]);\r\n        closeAllPopups();\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleCardLike(card) {\r\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n    (!isLiked ? api.putLike(card._id) : api.deleteLike(card._id))\r\n      .then((newCard) => {\r\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function handleCardDelete(card) {\r\n    api.deleteCard(card._id)\r\n      .then(() => {\r\n        const newCards = cards.filter((c) => c._id !== card._id);\r\n        setCards(newCards);\r\n      })\r\n      .catch(err => console.log(err));\r\n  }\r\n\r\n  function closeAllPopups() {\r\n    setIsEditAvatarPopupOpen(false);\r\n    setIsEditProfilePopupOpen(false);\r\n    setIsAddPlacePopupOpen(false);\r\n    setIsImagePopupOpen(false);\r\n    setIsInfoTooltipOpen(false);\r\n  }\r\n\r\n  return (\r\n    <CurrentUserContext.Provider value={currentUser}>\r\n      <div className=\"page\">\r\n\r\n        <Header email={email} isLoggedIn={loggedIn} onLogout={handleLogout} />\r\n\r\n        <Switch>\r\n        <ProtectedRoute\r\n            exact path=\"/\"\r\n            component={Main}\r\n            loggedIn={loggedIn}\r\n            cards={cards}\r\n            onEditProfile={handleEditProfileClick}\r\n            onAddPlace={handleAddPlaceClick}\r\n            onEditAvatar={handleEditAvatarClick}\r\n            onCardClick={handleCardClick}\r\n            onCardDelete={handleCardDelete}\r\n            onCardLike={handleCardLike} />\r\n\r\n          <Route path='/sign-in'>\r\n            <Login onSubmit={handleLoginFormSubmit} />\r\n          </Route>\r\n\r\n          <Route path='/sign-up'>\r\n            <Register onSubmit={handleRegisterFormSubmit} />\r\n          </Route>\r\n\r\n        </Switch>\r\n\r\n        {loggedIn && <Footer />}\r\n\r\n      </div>\r\n\r\n      <EditProfilePopup\r\n        isOpen={isEditProfilePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onUpdateUser={handleUpdateUser}\r\n      />\r\n\r\n      <EditAvatarPopup\r\n        isOpen={isEditAvatarPopupOpen}\r\n        onClose={closeAllPopups}\r\n        onUpdateAvatar={handleUpdateAvatar}\r\n      />\r\n\r\n      <AddPlacePopup\r\n        isOpen={isAddPlacePopupOpen}\r\n        onClose={closeAllPopups}\r\n        onAddPlace={handleUpdateCards}\r\n      />\r\n\r\n      <PopupWithForm\r\n        name=\"delete-card\"\r\n        title=\"Вы уверены\">\r\n        <button type=\"submit\" className=\"popup__submit popup__submit-confirm\">Да</button>\r\n      </PopupWithForm>\r\n\r\n      <InfoTooltipContext.Provider value={infoTooltipCaptions[infoTooltipContext]}>\r\n        <InfoTooltip\r\n          isOpen={isInfoTooltipOpen}\r\n          onClose={closeAllPopups}\r\n          loggedIn={loggedIn}\r\n        />\r\n      </InfoTooltipContext.Provider>\r\n\r\n      <ImagePopup\r\n        isOpen={isImagePopupOpen}\r\n        onClose={closeAllPopups}\r\n        card={selectedCard}\r\n      />\r\n\r\n    </CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <BrowserRouter basename={process.env.PUBLIC_URL}>\r\n      <App />\r\n    </BrowserRouter>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n"],"sourceRoot":""}